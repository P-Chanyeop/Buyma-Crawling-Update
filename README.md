# 🚀 BUYMA 자동화 프로그램 Enhanced Edition

경쟁사 상품 크롤링부터 가격 분석, 상품 업로드, 가격 수정까지 전체 프로세스를 자동화하는 통합 솔루션입니다.

## ✨ 주요 기능

### 🔍 **스마트 크롤링 시스템**
- **선택적 데이터 수집**: 이미지, 색상/사이즈 옵션 포함 여부 설정 가능
- **중복 상품 자동 제외**: URL 기준 중복 상품 자동 감지 및 건너뛰기
- **커스터마이징 가능한 지연시간**: 서버 부하 방지를 위한 유연한 딜레이 설정
- **실시간 진행률 표시**: 크롤링 진행 상황 실시간 모니터링
- **안전한 스레드 기반 처리**: UI 멈춤 없는 백그라운드 크롤링
- **고급 안정성 기능**: QUOTA_EXCEEDED 오류 방지, 자동 재시도, 메모리 최적화
- **독립적인 크롤링 브라우저**: 로그인 불필요한 별도 브라우저로 안전한 크롤링
- **UI 충돌 방지**: 크롤링 중 UI 비활성화로 프로그램 안정성 보장

### 🔐 **통합 로그인 시스템**
- **원클릭 로그인**: 설정 탭에서 간편한 BUYMA 로그인
- **세션 지속성**: 로그인된 브라우저를 프로그램 종료까지 유지
- **자동 상태 관리**: 로그인 성공/실패 자동 감지 및 UI 업데이트
- **안전한 인증**: 다중 선택자 기반 안정적인 로그인 프로세스
- **통합 브라우저**: 모든 기능이 하나의 로그인된 브라우저 세션 공유
- **계정 정보 자동 저장**: Base64 인코딩으로 계정 정보 안전 저장 및 자동 복원

### 💰 **지능형 가격 관리**
- **내 상품 자동 크롤링**: BUYMA 판매 중인 상품 목록 자동 수집
- **실시간 경쟁사 최저가 분석**: 각 상품별 BUYMA 검색을 통한 최저가 비교
- **마진 기반 자동 수정**: 최소 마진 보장하면서 경쟁력 있는 가격 설정
- **자동/수동 모드**: 즉시 수정 또는 검토 후 수정 선택 가능
- **브랜드별 필터링**: 특정 브랜드만 선택적으로 분석 가능
- **일괄 처리 및 개별 제어**: 전체 자동화와 세밀한 수동 제어 모두 지원

### ⭐ **주력 상품 관리**
- **즐겨찾기 시스템**: 중요 상품을 주력 상품으로 등록 및 관리
- **자동 가격 모니터링**: 주력 상품의 정기적인 가격 확인 및 조정
- **데이터 영구 저장**: JSON 기반 주력 상품 데이터 자동 저장/로드
- **실시간 상태 추적**: 각 주력 상품의 최신 상태 및 마지막 확인 시간 표시

### 🎨 **사용자 경험 개선**
- **맑은 고딕 폰트**: 전체 UI에 한글 최적화 폰트 적용
- **직관적인 액션 버튼**: 상세보기, 주력상품 추가, 바로 업로드, URL 열기
- **실시간 로그 시스템**: 모든 작업의 상세한 진행 상황 표시
- **자동 스크롤 로그창**: 새 로그 메시지 자동 스크롤로 최신 상황 실시간 확인
- **크롤링 중 UI 제어**: 작업 중 UI 비활성화로 충돌 방지 및 안정성 보장
- **모니터링 탭 자동 전환**: 크롤링 시작 시 자동으로 모니터링 화면으로 이동
- **안전한 종료 처리**: 프로그램 종료 시 모든 스레드 안전 정리

## 🎯 빠른 시작

### 1. 설치
```bash
# 저장소 클론
git clone <repository-url>
cd buyma-automation

# 의존성 설치
pip install -r requirements.txt
```

### 2. 설정
```bash
# 설정 파일 생성
cp config_template.json config.json

# config.json에서 BUYMA 계정 정보 입력
```

### 3. 실행
```bash
python buyma.py
```

### 4. 사용법

#### 🔐 **BUYMA 로그인 (필수)**
1. **설정 탭 이동**: 프로그램 하단의 "⚙️ 설정" 탭 클릭
2. **계정 정보 입력**:
   - 이메일: BUYMA 계정 이메일 주소 입력
   - 비밀번호: BUYMA 계정 비밀번호 입력
3. **로그인 실행**: **🔐 BUYMA 로그인** 버튼 클릭
4. **로그인 확인**: "✅ 로그인 성공" 메시지 확인

> ⚠️ **중요**: 모든 기능 사용 전에 반드시 BUYMA 로그인을 완료해야 합니다.

#### 📊 **상품 크롤링**
1. **크롤링 설정**:
   - 크롤링 개수: 수집할 상품 개수 설정
   - 지연시간: 서버 부하 방지를 위한 대기 시간
   - 이미지 포함: 상품 이미지 수집 여부
   - 색상/사이즈 옵션 포함: 옵션 정보 수집 여부
   - 중복 상품 제외: URL 기준 중복 상품 건너뛰기

2. **크롤링 실행**:
   - 경쟁사 URL 입력
   - **🚀 크롤링 시작** 클릭
   - 실시간 진행률 및 결과 확인

3. **액션 버튼 활용**:
   - **📋 상세보기**: 크롤링된 상품 정보 확인
   - **⭐ 주력상품 추가**: 좋은 상품을 주력 상품으로 등록
   - **📤 바로 업로드**: BUYMA에 즉시 업로드
   - **🔗 URL 열기**: 원본 상품 페이지 확인

#### 💰 **가격 관리**
1. **내 상품 불러오기**:
   - **📥 내 상품 불러오기** 버튼 클릭
   - https://www.buyma.com/my/sell/?status=for_sale&tab=b#/ 자동 접속
   - 판매 중인 상품 목록 자동 크롤링 및 테이블 표시

2. **가격 분석 설정**:
   - 할인 금액: 경쟁사 최저가보다 얼마나 할인할지
   - 최소 마진: 보장할 최소 마진 금액
   - 손실 예상 상품 자동 제외: 마진 부족 상품 제외

3. **가격 분석 실행**:
   - **🔍 가격 분석 시작** 클릭
   - 각 상품별로 BUYMA에서 검색하여 최저가 수집
   - 할인금액 적용하여 제안가 자동 계산
   - 마진 계산 및 수정 권장 여부 판단

4. **자동/수동 모드**:
   - **🤖 자동 모드**: 조건 만족 시 즉시 가격 수정
   - **👤 수동 모드**: 분석 결과 검토 후 수동 수정

5. **일괄 처리**:
   - **🔍 내 상품 전체 분석 & 수정**: 전체 프로세스 자동화

#### ⭐ **주력 상품 관리**
1. **주력 상품 등록**:
   - 크롤링 결과에서 **⭐** 버튼 클릭
   - 또는 직접 상품 정보 입력

2. **일괄 가격 확인**:
   - **🚀 주력상품 가격확인 시작** 클릭
   - 모든 주력 상품의 가격 자동 확인 및 수정
   - JSON 파일로 자동 저장/로드

## 📁 파일 구조

```
buyma-automation/
├── buyma.py                 # 메인 프로그램
├── error_handler.py         # 에러 처리 모듈
├── requirements.txt         # 필요 라이브러리
├── config_template.json     # 설정 파일 템플릿
├── favorite_products.json   # 주력 상품 데이터 (자동 생성)
├── 사용자_가이드.md         # 상세 사용법
├── 설정파일_사용법.md       # 설정 파일 가이드
└── README.md               # 이 파일
```

## 🔧 시스템 요구사항

- **운영체제**: Windows 10 이상
- **Python**: 3.8 이상
- **메모리**: 4GB 이상 권장
- **브라우저**: Chrome (자동 설치됨)
- **인터넷**: 안정적인 연결 필요

## 📖 상세 문서

- [📋 사용자 가이드](사용자_가이드.md) - 전체 기능 상세 설명
- [⚙️ 설정 파일 가이드](설정파일_사용법.md) - 설정 파일 사용법

## 🛡️ 보안 및 주의사항

### 법적 주의사항
- 저작권을 준수하여 사용하세요
- BUYMA 이용약관을 반드시 확인하세요
- 개인정보 보호에 주의하세요

### 기술적 주의사항
- 적절한 딜레이 설정으로 서버 부하 방지
- 여러 프로그램 동시 실행 금지
- 정기적인 데이터 백업 권장

## 🔄 업데이트 내역

### v2.4.0 (2025-01-16) - Price Management System Overhaul
- **🔄 가격 관리 시스템 완전 개편**: 브랜드명/상품명 입력 → 내 상품 자동 크롤링 방식으로 변경
- **📥 내 상품 자동 크롤링**: BUYMA 판매 페이지에서 상품 목록 자동 수집
- **🔍 실시간 최저가 검색**: 각 상품별로 BUYMA에서 검색하여 경쟁사 최저가 분석
- **🤖 자동/수동 모드 개선**: 가격 관리 모드에 따른 즉시 수정 또는 검토 후 수정
- **🔐 계정 정보 자동 저장**: Base64 인코딩으로 이메일/비밀번호 안전 저장 및 복원
- **🎨 UI 중복 제거**: 가격 관리 탭 중복 옵션 정리 및 사용성 개선
- **🛠️ 코드 구조 개선**: 1700라인 부근 문법 오류 및 중복 코드 완전 정리

### v2.3.0 (2025-01-16) - Crawling System Optimization
- **🔄 크롤링 시스템 분리**: 로그인 불필요한 독립적인 크롤링 브라우저 구현
- **🔒 UI 충돌 방지**: 크롤링 중 UI 비활성화로 프로그램 안정성 대폭 향상
- **📺 모니터링 탭 고정**: 크롤링 시작 시 자동으로 모니터링 탭으로 이동 및 고정
- **📜 자동 스크롤 로그**: 새 로그 메시지 자동 스크롤로 실시간 진행 상황 확인
- **⚡ 대용량 크롤링 지원**: 50개, 100개 이상 안정적인 크롤링 처리

### v2.2.0 (2025-01-16) - Login System Integration
- **🔐 통합 로그인 시스템**: BUYMA 자동 로그인 및 세션 관리
- **🌐 공용 브라우저 드라이버**: 로그인 상태 유지하며 모든 기능 통합 사용
- **🔄 세션 지속성**: 프로그램 종료까지 로그인 상태 유지
- **⚡ 효율성 향상**: 매번 로그인할 필요 없이 빠른 크롤링
- **🛡️ 로그인 필수 체크**: 모든 기능 사용 전 로그인 상태 확인

### v2.1.0 (2025-01-16) - Stability Enhancement
- **🛡️ 크롤링 안정성 대폭 강화**: QUOTA_EXCEEDED 오류 해결
- **🔧 Chrome 브라우저 최적화**: Google API 할당량 초과 방지 옵션 추가
- **🔄 재시도 로직 구현**: 브라우저 초기화 실패 시 자동 재시도 (최대 3회)
- **💾 메모리 관리 개선**: 가비지 컬렉션 및 리소스 정리 강화
- **⚠️ 오류 감지 시스템**: 심각한 오류 자동 감지 및 안전한 중단

### v2.0.0 (2025-01-16) - Enhanced Edition
- **🧵 스레드 기반 아키텍처**: UI 멈춤 현상 완전 해결
- **🎨 UI/UX 대폭 개선**: 맑은 고딕 폰트, 직관적인 액션 버튼
- **⚙️ 크롤링 설정 적용**: 이미지/옵션 포함, 중복 제외 기능 실제 적용
- **🔧 안정성 강화**: 예외 처리 개선, 안전한 종료 처리
- **📊 실시간 모니터링**: 상세한 로그 시스템, 진행률 표시

### v1.0.0 (2025-01-16)
- 초기 릴리즈
- 전체 자동화 프로세스 구현
- 에러 처리 및 세션 관리 기능 추가
- 사용자 가이드 및 설정 템플릿 제공

## 🆘 문제 해결

### 자주 발생하는 문제
1. **로그인 실패**: 계정 정보 확인
2. **크롤링 실패**: URL 및 네트워크 상태 확인
3. **세션 만료**: 자동 재로그인 기능 활용
4. **메모리 부족**: 크롤링 개수 조정
5. **UI 멈춤**: 스레드 기반으로 해결됨 (v2.0.0+)
6. **QUOTA_EXCEEDED 오류**: Chrome 최적화로 해결됨 (v2.1.0+)
7. **브라우저 갑작스런 종료**: 재시도 로직으로 해결됨 (v2.1.0+)
8. **로그인 필요 오류**: 설정 탭에서 BUYMA 로그인 완료 필요 (v2.2.0+)
9. **크롤링 중 프로그램 튕김**: UI 비활성화로 해결됨 (v2.3.0+)

### 크롤링 시스템 가이드 (v2.3.0+)
- **독립적인 크롤링**: 로그인 없이 새 브라우저로 크롤링 수행
- **UI 안전성**: 크롤링 중 모니터링 탭 고정 및 다른 UI 비활성화
- **실시간 모니터링**: 자동 스크롤 로그로 진행 상황 실시간 확인
- **대용량 처리**: 50개, 100개 이상도 안정적으로 크롤링 가능

### 로그인 시스템 가이드 (v2.2.0+)
- **로그인 위치**: 설정 탭 → BUYMA 계정 설정
- **로그인 상태 확인**: "✅ 로그인 성공" 메시지 확인
- **세션 유지**: 프로그램 종료까지 로그인 상태 자동 유지
- **로그아웃**: 로그인 버튼이 "🔓 로그아웃"으로 변경됨

### 크롤링 안정성 가이드 (v2.1.0+)
- **권장 크롤링 개수**: 처음 사용 시 5-10개로 테스트
- **지연시간 설정**: 3-5초 권장 (서버 부하 방지)
- **오류 발생 시**: 프로그램 완전 재시작 후 재시도
- **메모리 모니터링**: 작업 관리자에서 메모리 사용량 확인

### 지원
- 에러 발생 시 `error_report_*.json` 파일 확인
- 로그 창의 메시지를 통한 문제 진단

## 📊 성능 최적화

### 권장 설정
- **크롤링 개수**: 20-50개 (초보자는 10개부터)
- **딜레이 시간**: 3-5초
- **재시도 횟수**: 3회
- **타임아웃**: 10-15초

### 시스템 모니터링
- CPU 사용률: 90% 이하 유지
- 메모리 사용률: 80% 이하 유지
- 실시간 모니터링 기능 활용

## 🔐 보안 기능

- 세션 자동 관리 및 재로그인
- 네트워크 오류 자동 복구
- 에러 리포트 자동 생성
- 시스템 리소스 모니터링

## 📈 확장 기능

- Excel/CSV 데이터 내보내기
- 종합 리포트 생성
- 자동 백업 및 복원
- 설정 프로필 관리

---

**⚡ 효율적인 BUYMA 운영을 위한 최고의 자동화 솔루션!**

*이 프로그램은 교육 및 연구 목적으로 제작되었습니다. 사용 시 관련 법규와 이용약관을 준수해주세요.*
